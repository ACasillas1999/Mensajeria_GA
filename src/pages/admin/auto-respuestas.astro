---
import AppLayout from "../../layouts/AppLayout.astro";
import AutoRepliesAdmin from "../../components/AutoRepliesAdmin.jsx";
import BotTestingWidget from "../../components/BotTestingWidget.jsx";
import RuleSuggestionsWidget from "../../components/RuleSuggestionsWidget.jsx";

const user = (Astro.locals as any).user;
if (!user || String(user.rol || "").toLowerCase() !== "admin") {
  return Astro.redirect("/");
}
---

<AppLayout title="Auto-respuestas">
  <h1 class="text-2xl font-bold mb-4 text-slate-900 dark:text-slate-100">
    ðŸ¤– Auto-respuestas
  </h1>
  <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
    Configura las reglas que desencadenan respuestas automÃ¡ticas y ajusta el
    comportamiento del bot.
  </p>

  <div class="space-y-4">
    <!-- Simulador de pruebas -->
    <BotTestingWidget client:load />

    <!-- Sugerencias de auto-aprendizaje -->
    <RuleSuggestionsWidget client:load />

    <!-- Panel principal de auto-respuestas -->
    <AutoRepliesAdmin client:load />
  </div>
</AppLayout>
